= Port View
:idprefix:
:idseparator: -
:source-language: kotlin
:!showtitle:
:lang: zh_CN

ifdef::env-github[]
++++
<p align="center">
  <img width="256" height="256" src="logo.png" alt="logo">
  <h3 align="center">PortView</h3>
  <p align="center">
    <a title="Package release" href="https://github.com/lizhongyue248/PortView/actions/workflows/package.yml"><img src="https://github.com/lizhongyue248/PortView/actions/workflows/package.yml/badge.svg" alt="Package release svg" /></a>
    <a title="Release" href="https://github.com/lizhongyue248/PortView/releases"><img src="https://img.shields.io/github/v/release/lizhongyue248/PortView?sort=semver&display_name=release" alt="Package release svg" /></a>
    <br>
    <a href="README.adoc">ä¸­æ–‡</a> | <a href="README_EN.adoc">English</a>
  </p>
</p>
++++
endif::[]

ifndef::env-github[]
image::logo.png[256,256,Logo,align="center"]

[.text-center.lead]
PortView +
image:https://github.com/lizhongyue248/PortView/actions/workflows/package.yml/badge.svg[Package release,link="https://github.com/lizhongyue248/PortView/actions/workflows/package.yml",align="center"] image:https://img.shields.io/github/v/release/lizhongyue248/PortView?sort=semver&display_name=release[GitHub Release,link="https://github.com/lizhongyue248/PortView/releases", align="center"] +
link:README.adoc[ç®€ä½“ä¸­æ–‡] | link:README_EN.adoc[English]
endif::[]

== ğŸ’¡ç®€ä»‹

è¿™ä¸ªé¡¹ç›®ä¸»è¦åŠŸèƒ½æä¾›å›¾å½¢åŒ–çš„ç•Œé¢æ¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿç«¯å£å ç”¨æƒ…å†µï¼Œç›®å‰æ”¯æŒ Windowsã€Macosã€Debian Linux Desktopã€Centos Linux Desktop å¹³å°ã€‚ä½ å¯ä»¥é€šè¿‡ link:https://github.com/lizhongyue248/PortView/releases[Github Release] è·å–æœ€æ–°ç‰ˆæœ¬è¿›è¡Œä½“éªŒï¼Œä¸»è¦æ˜¯ä»¥å­¦ä¹  link:https://www.jetbrains.com/lp/compose-multiplatform/[compose-multiplatform] ä¸ºç›®çš„è¿›è¡Œå¼€å‘çš„ï¼Œä½†æ˜¯ä¹ŸåŠªåŠ›æŠŠå®ƒç»™åšå¥½ã€‚

image::docs/view.png[Demo]

== âœ¨ ç‰¹æ€§

- [x] æŸ¥çœ‹ä¸æœç´¢å½“å‰å ç”¨ç«¯å£çš„ç¨‹åº
- [x] å…³é—­æŒ‡å®šç¨‹åº
- [x] æŸ¥çœ‹ç›‘å¬çš„ IP åœ°å€å’Œ PID
- [x] æ‰“å¼€ç¨‹åºæ‰€åœ¨ç›®å½•
- [x] å¤åˆ¶ç¨‹åºè¿è¡Œå‘½ä»¤
- [x] å¤œé—´æ¨¡å¼æ”¯æŒã€ä¸­è‹±æ–‡æ”¯æŒ
- [x] é…ç½®æ–‡ä»¶æ”¯æŒ
- [x] è¿è¡Œæ—¥å¿—
- [x] Windows ææƒæ“ä½œ
- [ ] å®‰è£…æ–‡ä»¶å¢åŠ æ•°å­—ç­¾å
- [ ] å®Œå¤‡çš„å•å…ƒæµ‹è¯•ç”¨ä¾‹
- [ ] è‡ªåŠ¨æ›´æ–°åº”ç”¨

== ğŸ§‘â€ğŸ’» å¼€å‘

å·¥å…·ä¸»è¦ä½¿ç”¨æŠ€æœ¯æ ˆä¸º link:https://www.jetbrains.com/lp/compose-multiplatform/[compose-multiplatform]ï¼ŒåŸºäºæ­¤å®Œæˆå¤šæ¡Œé¢ç«¯çš„åˆ†å‘ã€‚å› æ­¤å†™æ³•ä¸ link:https://developer.android.com/jetpack/compose[Jetpack compose] å…·æœ‰ä¸€ç‚¹å·®å¼‚ï¼ŒåŒæ—¶å¢åŠ äº†éƒ¨åˆ†ç‹¬å±äº Desktop çš„ç‰¹æœ‰ç»„ä»¶ï¼ˆDesktopã€Trayã€Scrollbarã€Notification ç­‰ï¼‰ã€‚å…¶ä¸­åŒ…å«äº†è‡ªå®šä¹‰çš„éƒ¨åˆ†ç»„ä»¶ï¼Œä¾‹å¦‚å¯éšè—æ ‡é¢˜æŒä¹…åœ¨æœ€ä¸Šå±‚çš„çª—å£ç­‰ã€‚

=== æ ¸å¿ƒä»£ç 

è·å–è¿›ç¨‹çš„æ ¸å¿ƒä»£ç ä¸€å¼€å§‹æ˜¯é€šè¿‡ JNA è°ƒç”¨ç³»ç»Ÿ api å®Œæˆï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ç”±äºå¯¹äºä¸åŒå¹³å°ä¸»è¦é€šè¿‡è°ƒç”¨åº•å±‚ apiï¼Œåœ¨ mac ä¸Šè°ƒè¯•çš„æ—¶å€™å‘ç°è¿™ç‚¹æ¯”è¾ƒéš¾ï¼Œä½†æ˜¯ä¸å¤ªæƒ³é€šè¿‡å‘½ä»¤è§£æçš„æ–¹å¼è·å–æ•°æ®ã€‚æœ€åé€‰æ‹©ä½¿ç”¨ link:https://github.com/oshi/oshi[oshi] æ¥è·å–ç³»ç»Ÿè¿›ç¨‹å’Œç½‘ç»œä¿¡æ¯ï¼Œå­˜åœ¨çš„é—®é¢˜å°±æ˜¯è·å–çš„é€Ÿåº¦ç›¸æ¯”äºåº•å±‚ api æ…¢äº†å¾ˆå¤šï¼Œä½†æ˜¯æ•°æ®å®Œæ•´æ€§å’Œè·¨å¹³å°æ€§ç¡®æ˜¯æ”¯æŒæœ€å¥½çš„ã€‚åŸç”Ÿ Windows api è·å–è¿›ç¨‹ä¿¡æ¯åœ¨ link:https://github.com/lizhongyue248/PortView/commit/cd3c7f7784b41ff54c225b35b127f4d0aff9eaed#diff-5df30cfe24e76c37155179df0d1aacf59d7851c9c16a4dbc1774dd172f97f968L23[commit cd3c7f77] è¿›è¡Œé‡æ„ã€‚

=== é…ç½®ä¿¡æ¯

.é…ç½®æ–‡ä»¶å­˜å‚¨è·¯å¾„
[%autowidth]
|===
|ç³»ç»Ÿ |é…ç½®æ–‡ä»¶è·¯å¾„
|Macos
|/Users/\{username}/Library/Preferences/PortView/zyue

|Windows
|C:\Users\\{username}\AppData\Local\zyue\PortView

|Linux
|/home/\{username}/.config/PortView
|===

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç›®å‰ `compose-multiplatform` é€šè¿‡ `gradle` çš„é…ç½®å°†å…¶å¤åˆ¶åˆ°å¯¹åº”å¹³å°çš„ `app/resources` ç›®å½•ä¸‹ï¼Œå‚è€ƒ link:https://github.com/JetBrains/compose-multiplatform/tree/master/tutorials/Native_distributions_and_local_execution#adding-files-to-packaged-application[å®˜æ–¹æ–‡æ¡£] é…ç½®å¦‚ä¸‹

[source,kotlin]
----
appResourcesRootDir.set(project.layout.projectDirectory.dir("resources"))
----

ç›®å‰å­˜æ”¾çš„åªæ˜¯å¯¹ `windows` æœ‰æ•ˆçš„ææƒæ–‡ä»¶ã€‚

=== ç¬¬ä¸‰æ–¹åº“

`compose-multiplatform` ä½¿ç”¨äº† link:https://www.guardsquare.com/manual/home[ProGuard] è¿›è¡Œä»£ç ç¼©å°å’Œæ··æ·†ï¼Œæ··æ·†ç›®å‰æ˜¯å…³é—­çš„ï¼Œä½†æ˜¯å¯¹äºæŸäº›ç¬¬ä¸‰æ–¹åº“ä½¿ç”¨ä¼šé€ æˆç±»ä¼¼æ— æ³•æ‰¾åˆ°ç±»çš„å¼‚å¸¸æƒ…å†µï¼Œå› æ­¤éœ€è¦åœ¨ `compose-desktop.pro` æ–‡ä»¶ä¸­å®šä¹‰æŸäº›ä¸è¿›è¡Œå¤„ç†çš„åŒ…æˆ–è€…ç±»ï¼Œ


=== è¿è¡Œ

ä½¿ç”¨ `Gradle` è¿›è¡Œæ„å»ºï¼Œ`Graalvm-ce-17 JDK` ä¸ `Kotlin` è¿›è¡Œå¼€å‘ï¼Œä¸»è¦æä¾›å¦‚ä¸‹å‘½ä»¤è¿è¡Œä¸æ‰“åŒ…

.å‘½ä»¤ä¸ç”¨é€”
[%autowidth]
|===
|å‘½ä»¤ |ç”¨é€” | å…¶ä»–
|`./gradlew run`
|è¿è¡Œç¨‹åº
| -

|`./gradlew runRelease`
|è¿è¡Œå‘ç‰ˆåçš„ç¨‹åº
|ä¸ä¼šè¿›è¡Œé‡æ–°æ„å»º

|`./gradlew runReleaseDistributable`
|è¿è¡Œå‘ç‰ˆåçš„ç¨‹åº
|éœ€è¦é‡æ–°æ„å»º

|`./gradlew packageReleaseDistributionForCurrentOS`
|æ ¹æ®å½“å‰æ“ä½œç³»ç»Ÿæ‰“åŒ…
|æ”¯æŒ `msi`, `dmg`, `deb`, `rpm`
|===

æ„å»ºåçš„æ–‡ä»¶å­˜æ”¾åœ¨ `composeApp/build` ç›®å½•ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶æ‘å­˜æ”¾åœ¨ `composeApp/build/packages` ç›®å½•

=== å‘å¸ƒ

ä½¿ç”¨ link:https://github.com/lizhongyue248/PortView/actions[Github Action] è¿›è¡Œæ‰“åŒ…å’Œåˆ†å‘ï¼Œæ£€æµ‹åˆ°æœ‰ `v` å­—æ¯å¼€å¤´çš„æ ‡ç­¾æ—¶ï¼Œè‡ªåŠ¨è¿›è¡Œå‘å¸ƒåˆ° link:https://github.com/lizhongyue248/PortView/releases[Github Release]ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ`CHANGELOG.adoc` æ–‡ä»¶æ˜¯éœ€è¦äººå·¥å»ç»´æŠ¤çš„ï¼Œå› æ­¤æ¯æ¬¡å¢åŠ åŠŸèƒ½æˆ–è€…ä¿®å¤ï¼Œéœ€è¦è¡¥å……æ–‡æ¡£ï¼Œè¿™ä¹Ÿæ˜¯è¾ƒä¸ºæ¨èçš„ä¸€ç§å®è·µã€‚

=== ç­¾åé—®é¢˜

åœ¨ `Mac` å’Œ `Windows` ä¸Šéƒ½å­˜åœ¨ç­¾åé—®é¢˜ï¼Œè½¯ä»¶å®‰è£…æ—¶ä¼šæç¤ºæ¥è‡ªä¸å—ä¿¡ä»»çš„å¼€å‘è€…ï¼Œå‚è€ƒ link:https://support.apple.com/zh-cn/guide/mac-help/mh40616/mac[æ‰“å¼€æ¥è‡ªèº«ä»½ä¸æ˜å¼€å‘è€…çš„ Mac App] ä¸ link:https://support.microsoft.com/zh-cn/windows/%E5%B0%86%E6%8E%92%E9%99%A4%E9%A1%B9%E6%B7%BB%E5%8A%A0%E5%88%B0-windows-%E5%AE%89%E5%85%A8%E4%B8%AD%E5%BF%83-811816c0-4dfd-af4a-47e4-c301afe13b26[å°†æ’é™¤é¡¹æ·»åŠ åˆ° Windows å®‰å…¨ä¸­å¿ƒ]ã€‚ä½ å¯ä»¥å®Œå…¨æ”¾å¿ƒï¼Œåº”ç”¨ä¸è¿›è¡Œä»»ä½•ç½‘ç»œè¯·æ±‚ä¸æ¶æ„ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶ï¼Œå¦‚æœä½ ä»‹æ„ï¼Œè¿˜å¯ä»¥ä¸‹è½½æºç è¿›è¡Œç¼–è¯‘è¿è¡Œã€‚


== âœ… æµ‹è¯•

ç›®å‰åœ¨ä»¥ä¸‹å¹³å°åŠŸèƒ½æ€§æµ‹è¯•é€šè¿‡

- Windows 11 23H2 (22631)
- Macos Sonoma 14.2.1
- Ubuntu 22.04.3 Gnome Desktop

å•å…ƒæµ‹è¯•ä¸€æ–¹é¢æ˜¯ `compose-multiplatform` æ”¯æŒè¿˜ä¸ç‰¹åˆ«å®Œå–„ï¼Œå¦ä¸€æ–¹é¢æ˜¯éœ€æ±‚åœ¨å˜åŠ¨æ²¡æœ‰å®Œå…¨ç¡®å®šä¸‹æ¥ï¼Œæ‰€ä»¥ä¸€ç›´æ²¡æœ‰å†™ã€‚å¾…å®Œå–„...